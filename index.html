<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Nossa História — Presente de Natal</title>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0b1020;
      --card:#fff;
      --accent:#b71c1c; /* vermelho natal */
      --accent2:#2e7d32; /* verde natal */
      --soft:#f7f5f3;
      --glass: rgba(255,255,255,0.06);
      color-scheme: dark;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial}
    body{
      background: linear-gradient(180deg,#071226 0%, #0c2230 60%);
      color:var(--soft); -webkit-font-smoothing:antialiased;
      overflow-x:hidden;
    }
    main{max-width:1100px;margin:0 auto;padding:40px 20px 140px}

    /* Header */
    header{display:flex;gap:20px;align-items:center}
    .logo{display:flex;gap:14px;align-items:center}
    .logo .tree{width:56px;height:56px;background:linear-gradient(180deg,var(--accent),var(--accent2));border-radius:12px;display:grid;place-items:center;font-weight:900;color:white;font-family:Playfair Display}
    header h1{font-family:Playfair Display;font-size:28px;margin:0}
    header p{margin:0;opacity:0.85}

    /* Start area */
    .hero{margin-top:28px;padding:28px;border-radius:14px;background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));box-shadow:0 6px 30px rgba(2,6,23,0.6);display:grid;grid-template-columns:1fr 300px;gap:24px;align-items:center}
    .hero .intro{padding:8px}
    .hero h2{font-family:Playfair Display;font-size:32px;margin:0 0 8px}
    .hero p{margin:0 0 16px}
    .btn{display:inline-flex;align-items:center;gap:10px;background:var(--accent);color:white;padding:12px 18px;border-radius:10px;border:0;cursor:pointer;font-weight:600;box-shadow:0 8px 24px rgba(183,28,28,0.25)}
    .btn.secondary{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--soft)}

    .hero .preview{display:grid;place-items:center}
    .preview .foto {width:170px;height:300px;border-radius:16px;overflow:hidden;border:6px solid rgba(255,255,255,0.04);background:linear-gradient(180deg,#111827,#0b1220);display:grid;place-items:center}
    .preview .foto  img{width:100%;height:100%;object-fit:cover;display:block}

    /* timeline / number rolling */
    section{margin-top:54px}
    .timeline{padding:30px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));backdrop-filter: blur(6px)}
    .roll-area{display:flex;gap:18px;align-items:center;flex-wrap:wrap}
    .slot{background:var(--glass);padding:18px;border-radius:12px;min-width:120px;text-align:center;box-shadow:inset 0 -20px 40px rgba(2,6,23,0.4)}
    .slot .label{font-size:12px;opacity:0.7}
    .slot .value{font-family:Playfair Display;font-size:28px;margin-top:6px}
    .completed{margin-top:18px;display:flex;gap:20px;align-items:center}
    .completed .datebig{font-family:Playfair Display;font-size:36px}
    .completed .couple{width:140px;height:140px;border-radius:12px;overflow:hidden;border:6px solid rgba(255,255,255,0.04)}
    .couple img{width:100%;height:100%;object-fit:cover}

    /* polaroids */
    .polaroid-wrap{margin-top:40px;padding:30px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));}
    .polaroids{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
  gap:20px;
  padding:20px;
  justify-items:center;
}
    .polaroid{width:150px;background:#fff;border-radius:6px;padding:12px 12px 18px;color:#111;transform-origin:center;box-shadow:0 8px 30px rgba(2,6,23,0.55);position:relative}
    .polaroid img{
  width:100%;
  height:100%;
  object-fit:cover;
  aspect-ratio: 9/16;
  border-radius:6px;
  filter: brightness(1.05) contrast(1.05) saturate(1.1) sepia(0.05);
}
    .polaroid .caption{margin-top:10px;text-align:center;font-family:Playfair Display}
    .date-tag{position:absolute;left:8px;bottom:8px;background:linear-gradient(90deg,var(--accent),var(--accent2));color:white;padding:6px 8px;border-radius:6px;font-size:11px}

    /* player */
    .player-wrap{margin-top:40px;padding:28px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));display:flex;gap:20px;align-items:center}
    .player-left{width:150px}
    .player-left .cover{width:140px;height:140px;border-radius:10px;overflow:hidden;border:6px solid rgba(255,255,255,0.04)}
    .player-right{flex:1}
    .controls{display:flex;align-items:center;gap:12px;margin-top:10px}
    .playbtn{width:48px;height:48px;border-radius:50%;display:grid;place-items:center;background:linear-gradient(180deg,var(--accent),#ff6b6b);border:0;color:white;font-size:18px;cursor:pointer}
    .seek{width:100%;height:8px;background:rgba(255,255,255,0.06);border-radius:8px;position:relative;overflow:hidden}
    .seek .progress{height:100%;width:0%;background:linear-gradient(90deg,var(--accent),var(--accent2));}
    .time-row{display:flex;justify-content:space-between;font-size:12px;opacity:0.8;margin-top:6px}

    /* te amo section */
    .teamo{margin-top:40px;padding:40px;border-radius:12px;text-align:center;background:linear-gradient(180deg, rgba(183,28,28,0.06), rgba(46,125,50,0.02));position:relative;overflow:hidden}
    .teamo h2{font-family:Playfair Display;font-size:44px;margin:0}
    .rose{position:absolute;top:-60px;left:0;width:36px;height:36px;background-image:url('rose.png');background-size:cover;opacity:0.95}

    /* snow */
    .snowflake{position:fixed;top:-10px;pointer-events:none;z-index:9999;filter:drop-shadow(0 4px 10px rgba(0,0,0,0.6))}

    /* responsive tweaks */
    @media(max-width:820px){
      .hero{grid-template-columns:1fr;text-align:center}
      .intro{padding:0 10px}
      header{flex-direction:column;text-align:center}
      .player-wrap{flex-direction:column;align-items:center}
      .player-right{width:100%}
    }

    @media(max-width:600px){
      .polaroids{grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:14px}
      .polaroid{width:120px;padding:10px}
      .polaroid img{height:90px}
      .hero h2{font-size:26px}
      .hero p{font-size:14px}
    }

    @media(max-width:420px){
      main{padding:20px 14px 120px}
      .hero{padding:18px}
      .btn{padding:10px 14px;font-size:14px}
      .preview .foto {width:160px;height:160px}
      .slot{min-width:90px;padding:14px}
      .completed .datebig{font-size:28px}
    }.player-wrap{flex-direction:column;align-items:center}.player-right{width:100%}
  .rosa-chuva{z-index:50 !important;}
#intro,#te-amo{position:relative !important; overflow:hidden !important; z-index:1;}
body{background:#0b1f0b !important; background:linear-gradient(180deg,#0b1f0b,#123d12,#0b1f0b) !important;}
</style>
</head>
<body>
  <!-- small decorative snow elements (JS will create many) -->
  <main>
    <header>
      <div class="logo">
        <div>
          <h1>Nossa História</h1>
          <p>Um presente de Natal para meu amor.</p>
        </div>
      </div>
    </header>

    <section class="hero" id="hero">
      <div class="intro">
        <h2>Comece a viagem</h2>
        <p>Um passeio pela nossa história. ❤</p>
        <button class="btn" id="startBtn">Começar</button>
        <button class="btn secondary" id="skipBtn">Pular animação</button>
      </div>
      <div class="preview">
        <div class="foto "><img id="previewImg" src="couple2.jpg" alt="Nossa foto"></div>
      </div>
    </section>

    <section class="timeline" id="timeline" style="margin-top:40px">
      <h3 style="margin:0 0 12px;font-family:Playfair Display">O dia que nos conhecemos</h3>
      <div class="roll-area">
        <div class="slot">
          <div class="label">Dia</div>
          <div class="value" id="slot-day">--</div>
        </div>
        <div class="slot">
          <div class="label">Mês</div>
          <div class="value" id="slot-month">--</div>
        </div>
        <div class="slot">
          <div class="label">Ano</div>
          <div class="value" id="slot-year">--</div>
        </div>
      </div>

      <div class="completed" id="completed" style="display:none">
        <div class="datebig" id="dateBig">06/07/2025</div>
        <div class="couple"><img id="revealedImg" src="couple2.jpg" alt="Nossa foto"></div>
      </div>
    </section>

    <section class="polaroid-wrap" id="polaroidsSection">
      <h3 style="font-family:Playfair Display">Uma foto por mês</h3>
      <p style="opacity:0.85;margin-top:6px">17 polaroids — cada uma representando um mês da nossa história até dezembro de 2025.</p>
      <div class="polaroids" id="polaroids">
        <!-- JS will inject 17 polaroids with placeholders -->
      </div>
    </section>

    <section class="player-wrap" id="playerSection">
      <div class="player-left">
        <div class="cover"><img id="coverImg" src="couple2.jpg" alt="Capa" style="width:100%;height:100%;object-fit:cover"></div>
      </div>
      <div class="player-right">
        <h3 style="margin:0;font-family:Playfair Display">Nossa Playlist</h3>
        <p style="margin:6px 0 0;opacity:0.86">A música que me faz lembrar de você, minha gata. </p>
        <div class="controls">
          <button class="playbtn" id="playToggle">▶</button>
          <div style="flex:1">
            <div class="seek" id="seekBar"><div class="progress" id="progress"></div></div>
            <div class="time-row"><div id="curTime">0:00</div><div id="durTime">0:00</div></div>
          </div>
        </div>
        <audio id="audioPlayer" src="song.mp3"></audio>
      </div>
    </section>

    <section class="teamo" id="teamo">
      <h2>Te amo</h2>
      <p style="opacity:0.9;margin-top:8px">Obrigado por cada dia e por ser você. </p>
    </section>

  </main>

  <script>
    /* ---------- Configurable data ---------- */
    const revealDate = {day:6, month:7, year:2025}; // 6/07/2025
    const revealImageSrc = 'couple3.jpg'; // image to reveal after roll
    const polaroidCount = 17;
    const polaroidLast = {month:12, year:2025}; // final month: December 2025

    /* ---------- Utility ---------- */
    function $(sel){return document.querySelector(sel)}
    function $all(sel){return Array.from(document.querySelectorAll(sel))}

    /* ---------- Start / scroll behavior ---------- */
    const startBtn = $('#startBtn');
    const skipBtn = $('#skipBtn');
    const timeline = $('#timeline');
    const completed = $('#completed');
    const slotDay = $('#slot-day');
    const slotMonth = $('#slot-month');
    const slotYear = $('#slot-year');
    const dateBig = $('#dateBig');
    const revealedImg = $('#revealedImg');

    startBtn.addEventListener('click', ()=>{
      timeline.scrollIntoView({behavior:'smooth'});
      startRoll();
    });
    skipBtn.addEventListener('click', ()=>{
      timeline.scrollIntoView({behavior:'smooth'});
      finishRollImmediately();
    });

    /* ---------- Rolling animation (slot machine style) ---------- */
    let rollInterval;
    function startRoll(){
      let ticks = 0; const maxTicks = 80; // approx duration
      rollInterval = setInterval(()=>{
        ticks++;
        slotDay.textContent = String(Math.floor(Math.random()*28)+1).padStart(2,'0');
        slotMonth.textContent = String(Math.floor(Math.random()*12)+1).padStart(2,'0');
        slotYear.textContent = String(2018 + Math.floor(Math.random()*10));
        if(ticks>maxTicks){
          clearInterval(rollInterval);
          // small slowdown effect
          slowDownToTarget();
        }
      },40);
    }
    function slowDownToTarget(){
      const steps = [200,300,400,600];
      let i=0;
      function step(){
        slotDay.textContent = String(Math.floor(Math.random()*28)+1).padStart(2,'0');
        slotMonth.textContent = String(Math.floor(Math.random()*12)+1).padStart(2,'0');
        slotYear.textContent = String(2018 + Math.floor(Math.random()*10));
        if(i<steps.length){
          setTimeout(step, steps[i]); i++;
        } else {
          // final reveal
          slotDay.textContent = String(revealDate.day).padStart(2,'0');
          slotMonth.textContent = String(revealDate.month).padStart(2,'0');
          slotYear.textContent = String(revealDate.year);
          showCompleted();
        }
      }
      step();
    }
    function finishRollImmediately(){
      if(rollInterval) clearInterval(rollInterval);
      slotDay.textContent = String(revealDate.day).padStart(2,'0');
      slotMonth.textContent = String(revealDate.month).padStart(2,'0');
      slotYear.textContent = String(revealDate.year);
      showCompleted();
    }

    function showCompleted(){
      // small animation: show completed panel and zoom date
      completed.style.display = 'flex';
      revealedImg.src = revealImageSrc;
      dateBig.style.transformOrigin = 'left top';
      dateBig.animate([
        {transform:'scale(0.7) translateY(20px)',opacity:0},
        {transform:'scale(1.12) translateY(-6px)',opacity:1}
      ],{duration:800,easing:'cubic-bezier(.2,.9,.3,1)'});
      // after that, reveal polaroids area
      setTimeout(()=>{
        document.getElementById('polaroidsSection').scrollIntoView({behavior:'smooth'});
        populatePolaroids();
      },900);
    }

    /* ---------- Polaroids generation ---------- */
    function populatePolaroids(){
      const container = $('#polaroids');
      container.innerHTML = '';
      // calculate months backward from polaroidLast
      let m = polaroidLast.month - 1; // JS months 0-index
      let y = polaroidLast.year;
      const months = [];
      for(let i=0;i<polaroidCount;i++){
        const mm = m+1; // 1-based
        const label = monthName(mm) + ' ' + y;
        months.unshift({label, month:mm, year:y});
        // go back one month
        m--;
        if(m<0){m=11; y--;}
      }
      // months array now from oldest to newest
      months.forEach((it, idx) => {
  const pol = document.createElement('div');
  pol.className = 'polaroid';

  // slight random tilt
  const rot = (Math.random() * 12 - 6).toFixed(2);
  pol.style.transform = `rotate(${rot}deg)`;

  const img = document.createElement('img');
  const filename = `foto ${idx + 1}.jpg`;
  img.src = filename;
  img.alt = `Foto ${idx + 1}`;
  img.onerror = function () {
    this.style.opacity = .16;
    this.style.background = '#eee';
  };

  // NEW: only date-tag (month/year)
  const dateTag = document.createElement('div');
  dateTag.className = 'date-tag';
  dateTag.textContent = it.label;

  pol.appendChild(img);
  pol.appendChild(dateTag);
  container.appendChild(pol);
});

  const caption = document.createElement('div');
  caption.className = 'caption';
  caption.textContent = it.label;

  const dateTag = document.createElement('div');
  dateTag.className = 'date-tag';
  dateTag.textContent = it.month.toString().padStart(2,'0') + '/' + it.year;

  pol.appendChild(img);
  pol.appendChild(caption);
  pol.appendChild(dateTag);

  container.appendChild(pol);
};
    
    function monthName(n){
      const arr=['Jan','Fev','Mar','Abr','Mai','Jun','Jul','Ago','Set','Out','Nov','Dez'];
      return arr[n-1]||'';
    }

    /* ---------- Custom audio player ---------- */
    const audio = document.getElementById('audioPlayer');
    const playToggle = document.getElementById('playToggle');
    const progress = document.getElementById('progress');
    const seekBar = document.getElementById('seekBar');
    const curTime = document.getElementById('curTime');
    const durTime = document.getElementById('durTime');

    playToggle.addEventListener('click', ()=>{
      if(audio.paused){audio.play();} else {audio.pause();}
    });
    audio.addEventListener('play', ()=>{playToggle.textContent='⏸';});
    audio.addEventListener('pause', ()=>{playToggle.textContent='▶';});
    audio.addEventListener('timeupdate', ()=>{
      if(audio.duration){
        const pct = (audio.currentTime/audio.duration)*100;
        progress.style.width = pct + '%';
        curTime.textContent = formatTime(audio.currentTime);
      }
    });
    audio.addEventListener('loadedmetadata', ()=>{durTime.textContent = formatTime(audio.duration)});

    seekBar.addEventListener('click', (e)=>{
      const rect = seekBar.getBoundingClientRect();
      const x = e.clientX - rect.left; const pct = x/rect.width; if(audio.duration) audio.currentTime = pct*audio.duration;
    });
    function formatTime(sec){
      if(!sec || !isFinite(sec)) return '0:00';
      const m = Math.floor(sec/60); const s = Math.floor(sec%60);
      return m+':'+String(s).padStart(2,'0');
    }

    /* ---------- Decorative snow + roses animation ---------- */
    // snow
    function makeSnowflake(){
      const s = document.createElement('div'); s.className='snowflake';
      const size = Math.random()*14 + 6; s.style.width = size+'px'; s.style.height = size+'px';
      s.style.left = Math.random()*100 + '%';
      s.style.opacity = (Math.random()*0.6)+0.3;
      s.style.backgroundImage = "url('snowflake.png')"; s.style.backgroundSize = 'contain';
      const dur = Math.random()*9000 + 6000; s.style.transition = `transform ${dur}ms linear, opacity ${dur}ms linear`;
      document.body.appendChild(s);
      requestAnimationFrame(()=>{
        s.style.transform = `translateY(${window.innerHeight+80}px) rotate(${Math.random()*360}deg)`;
      });
      setTimeout(()=>{s.remove()}, dur+50);
    }
    // create many snowflakes on init
    for(let i=0;i<18;i++){setTimeout(makeSnowflake, i*300)}
    setInterval(makeSnowflake, 1200);

    // roses falling in "te amo" section
    function makeRose(){
      const wrap = document.getElementById('teamo');
      const r = document.createElement('div'); r.className='rose';
      const left = Math.random()*100; r.style.left = left + '%'; r.style.top = '-40px';
      r.style.opacity = 0.95; r.style.transform = `translateY(-40px) rotate(${Math.random()*360}deg)`;
      wrap.appendChild(r);
      const dur = 6000 + Math.random()*4000;
      r.animate([
        {transform:`translateY(-40px) rotate(${Math.random()*20-10}deg)`, opacity:1},
        {transform:`translateY(${wrap.clientHeight+80}px) rotate(${Math.random()*720-360}deg)`, opacity:0.02}
      ],{duration:dur, easing:'ease-in'});
      setTimeout(()=>{r.remove()}, dur+80);
    }
    setInterval(makeRose, 800);

    /* ---------- small helpers & initial state ---------- */
    // set preview image if provided
    $('#previewImg').src = revealImageSrc;

    // populate polaroids only when revealed (but we generate an initial light layout)
    (function prepopulate(){
      const cont = $('#polaroids');
      for(let i=0;i<polaroidCount;i++){
        const p = document.createElement('div'); p.className='polaroid'; p.style.opacity=0.28; p.innerHTML = `<img src="foto ${i+1}.jpg" alt="Foto ${i+1}"><div class='caption'>Mês</div><div class='date-tag'>--/----</div>`;
        cont.appendChild(p);
      }
    })();

    /* ---------- end script ---------- */
  </script>
<style>
/* Override polaroid sizing */
.polaroid {
  width: 180px !important;
  padding: 10px !important;
  margin: 18px !important;
  border-radius: 12px !important;
}
.polaroid img {
  width: 100% !important;
  height: 230px !important;
  object-fit: cover !important;
  border-radius: 8px !important;
  margin-bottom: 8px !important;
}

/* Chuva de rosas */
.rosa-chuva {
  position: absolute;
  top: -60px;
  width: 40px;
  pointer-events: none;
  animation: cairRosas 6s linear infinite;
  opacity: .85;
}
@keyframes cairRosas {
  0% { transform: translateY(0) rotate(0deg); }
  100% { transform: translateY(120vh) rotate(360deg); }
}
</style>

<script>
function criarChuvaRosas(containerSelector){
  const container = document.querySelector(containerSelector);
  if(!container) return;

  for(let i=0;i<25;i++){
    const rosa = document.createElement('img');
    rosa.src = 'https://pngimg.com/uploads/rose/rose_PNG667.png';
    rosa.className = 'rosa-chuva';
    rosa.style.left = Math.random()*100 + 'vw';
    rosa.style.animationDelay = (Math.random()*3)+'s';
    rosa.style.transform = `scale(${0.4 + Math.random()*0.6})`;
    container.appendChild(rosa);
  }
}

// garantir posição relativa nos containers
['#intro','#te-amo'].forEach(sel=>{
  const el=document.querySelector(sel);
  if(el){ el.style.position='relative'; el.style.overflow='hidden'; }
});

window.addEventListener('load', () => {
  criarChuvaRosas('#hero');
  criarChuvaRosas('#te-amo');
});
</script>
<script>
// --- FIX TOTAL DA CHUVA DE ROSAS ---
function criarChuvaRosas(containerSelector){
  const container = document.querySelector(containerSelector);
  if(!container) return;

  // container precisa permitir conteúdo absoluto
  container.style.position = 'relative';
  container.style.overflow = 'hidden';

  for(let i=0;i<35;i++){
    const rosa = document.createElement('img');
    rosa.src = 'coracao.png'; // rosa PNG leve
    rosa.className = 'rosa-chuva';
    rosa.style.left = Math.random()*100 + 'vw';
    rosa.style.top = '-80px';
    rosa.style.animationDelay = (Math.random()*5)+'s';
    rosa.style.transform = `scale(${0.4 + Math.random()*0.7})`;
    container.appendChild(rosa);
  }
}

window.addEventListener('DOMContentLoaded', () => {
  criarChuvaRosas('#intro');
  criarChuvaRosas('#teamo');
  criarChuvaRosas('#playerSection');
});
</script>

<style>
/* chuva de rosas com z-index garantido */
.rosa-chuva {
  position: absolute;
  width: 55px;
  pointer-events: none;
  z-index: 9999 !important;
  animation: cairRosas 7s linear infinite;
  opacity: 0.9;
}
@keyframes cairRosas {
  0% { transform: translateY(0) rotate(0deg); }
  100% { transform: translateY(130vh) rotate(360deg); }
}
</style>

</body>
</html>


